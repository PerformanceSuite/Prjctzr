#!/bin/bash
# Prjctzr session-end implementation

echo "üìù Ending Prjctzr Development Session"
echo "===================================="
echo ""

# Get session duration
START_TIME=$(grep "Session Started:" .sessions/current_session.txt 2>/dev/null | cut -d: -f2- || echo "Unknown")
END_TIME=$(date '+%Y-%m-%d %H:%M')

echo "‚è∞ Session Duration:"
echo "   Started: $START_TIME"
echo "   Ended:   $END_TIME"
echo ""

# Prompt for session summary
echo "üìã Session Summary"
echo "Please provide a brief summary of work completed:"
echo "(This will be added to SESSION_LOG.md)"
echo ""

# Create session end entry
DATE=$(date '+%Y-%m-%d')
cat << EOF

### Session End Entry for SESSION_LOG.md:
----------------------------------------
### $DATE - Development Session

#### Completed:
- [Add completed items]

#### In Progress:
- [Add in-progress items]

#### Blockers:
- [Add any blockers]

#### Next Session:
- [Add tasks for next session]

----------------------------------------
EOF

echo ""
echo "üí° Reminders:"
echo "1. Update SESSION_LOG.md with the session summary above"
echo "2. Update sprint status in docs/sprints/SPRINT_01.md if needed"
echo "3. Commit changes if appropriate"
echo "4. Review ROADMAP.md progress metrics"
echo ""

echo "üìä Current Project Status:"
grep "Overall Progress:" ROADMAP.md 2>/dev/null || echo "Progress not found"
echo ""

echo "‚úÖ Session ended successfully!"
echo "Thank you for contributing to Prjctzr!"

# Run the session manager
./scripts/session-manager.sh end 2>/dev/null || true