#!/bin/bash
# Prjctzr session-start implementation

# Load recent session context
echo "🚀 Starting Prjctzr Development Session"
echo "======================================"
echo ""

# Display last session summary
echo "📋 Last Session Summary:"
grep -A 10 "^## " SESSION_LOG.md | head -15 2>/dev/null || echo "No previous sessions found"
echo ""

# Show current sprint status
echo "🎯 Current Sprint: Sprint 1 - Core Architecture Refactor"
if [ -f "docs/sprints/SPRINT_01.md" ]; then
    echo "Sprint Goals:"
    grep -A 3 "^## 📋 Sprint Objectives" docs/sprints/SPRINT_01.md | tail -3
fi
echo ""

# Show project progress
echo "📊 Project Progress:"
grep "Overall Progress:" ROADMAP.md 2>/dev/null || echo "Progress tracking not found"
echo ""

# Load relevant files into context
echo "📂 Loading Context Files:"
echo "- ✓ SESSION_LOG.md (session history)"
echo "- ✓ ROADMAP.md (project timeline)"  
echo "- ✓ docs/sprints/SPRINT_01.md (current sprint)"
echo "- ✓ devassist-isolation/SMART_ISOLATION_ROADMAP.md (technical plan)"
echo ""

# Create session timestamp
TIMESTAMP=$(date '+%Y-%m-%d %H:%M')
echo "⏰ Session Started: $TIMESTAMP"
echo ""

# Provide next steps
echo "💡 Suggested Next Steps:"
echo "1. Review Sprint 1 objectives in docs/sprints/SPRINT_01.md"
echo "2. Check devassist-isolation/sprints/SPRINT_01_PLAN.md for details"
echo "3. Begin with ProjectAnalyzer implementation"
echo "4. Update SESSION_LOG.md as you progress"
echo ""

echo "✅ Session initialized! Ready for development."
echo "Use /session-end when finished to save progress."

# Run the session manager
./scripts/session-manager.sh start 2>/dev/null || true